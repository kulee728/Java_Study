package com.pattern.construct.FactoryMethod.game.run;

import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

import com.pattern.construct.FactoryMethod.game.unit.Unit;
import com.pattern.construct.FactoryMethod.game.unitfactory.ArcherFactory;
import com.pattern.construct.FactoryMethod.game.unitfactory.CavalryFactory;
import com.pattern.construct.FactoryMethod.game.unitfactory.UnitFactory;

public class GameUnitClient {

	private static void consoleCleaner() {
		for(int i=0;i<50;i++)
			System.out.println();
	}
	
	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		Map<Integer,UnitFactory> factoryMap = new HashMap<>();
		
		factoryMap.put(1, new ArcherFactory());
		factoryMap.put(2, new CavalryFactory());
		
		System.out.println("---------- Archer & Cavalry ---------- ");
		Unit player1,player2;
		while(true) {
			Unit playerA,playerB;
			String unitClassName ="";
			String unitName;
			int unitAttackDamage;
			int unitAttackRange;
			System.out.print("플레이어 A의 직업을 선택해주세요 (1:궁수-이동속도 10, 2:기병-이동속도 20) : ");
			try {
				int unitClass = sc.nextInt();
				if(unitClass==1 || unitClass==2) {
					UnitFactory factoryA = factoryMap.get(unitClass);
					System.out.println(factoryA.getClassName()+" 직업을 선택하셨습니다.");
					System.out.println("해당 유닛의 이름을 설정해주세요 : ");
					System.out.println("해당 유닛의 공격력을 설정해주세요 : ");
					System.out.println("해당 유닛의 공격 사거리를 설정해주세요 : ");
					
					
					playerA = factoryA.createUnit(unitName, unitAttackDamage, unitAttackRange);
				}
				else {
					System.out.println("잘못된 값을 입력하셨습니다. 다시 입력해주세요.");
					System.out.println("아무 키 입력시 첫 화면으로 돌아갑니다.");
					sc.next();
					consoleCleaner();
					continue;
				}
					
			}
			catch(Exception E) {
				consoleCleaner();
				System.out.println("비 정상적인 접근입니다....처음부터 입력해주세요.");
				System.out.println("아무 키 입력시 첫 화면으로 돌아갑니다.");
				sc.next();
			}
		}
	}

}
